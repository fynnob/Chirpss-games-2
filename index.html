<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
        // 1. Check if the user already manually chose a language in the past
        var savedLang = localStorage.getItem('preferredLanguage');

        if (savedLang) {
            // FIX: Ensure the first letter is Uppercase and the rest is lowercase
            // This turns 'en' -> 'En', 'de' -> 'De', 'DE' -> 'De', etc.
            var formattedLang = savedLang.charAt(0).toUpperCase() + savedLang.slice(1).toLowerCase();
            
            window.location.replace('/' + formattedLang + '/');
        } else {
            // 2. If no preference, check their browser language
            var userLang = navigator.language || navigator.userLanguage; 
            
            // Check if the language starts with "de" (e.g., de-DE, de-AT, de-CH)
            if (userLang.startsWith('de')) {
                window.location.replace('/En/');
            } else {
                // Default to English for everyone else
                window.location.replace('/En/');
            }
        }
    </script>
</head>
<body>
    <p>Redirecting you to the correct version...</p>
</body>
</html>
